!function e(t,o,r){function n(i,c){if(!o[i]){if(!t[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){var o=t[i][1][e];return n(o?o:e)},u,u.exports,e,t,o,r)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=e("./directives"),s=r(n),i=e("./services"),c=r(i),l=angular.module("warframeTrade",["ngAnimate","ngTouch","ui.bootstrap","ui.router","ncy-angular-breadcrumb","ngScrollable",s["default"],c["default"]]),a=!1;l.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/home"),e.state("root",{url:"/home",views:{"":{template:"<root></root>"},"navbar@root":{template:"<custom-nav-bar user='userSession'></custom-nav-bar>",controller:["$scope","userSession",function(e,t){e.userSession=t}]},"body@root":{template:"<home user='userSession' children='children'></home>",controller:["$scope","userSession","children",function(e,t,o){e.userSession=t,e.children=o}]}},resolve:{userSession:["userSessionService",function(e){return e.getUserSession()}],children:["itemCategoryService",function(e,t){return e.getChildren("/Item")}]},ncyBreadcrumb:{label:"Home"}}).state("root.mods",{url:"/mods",views:{breadcrumb:{template:"<div ncy-breadcrumb></div>"},body:{templateUrl:"/ng/templates/root-mods-body-template.html"},"hierarchy@root.mods":{template:"<mods-hierarchy user='userSession' children='children'></mods-hierarchy>",controller:["$scope","userSession","children",function(e,t,o){e.userSession=t,e.children=o}]}},resolve:{children:["itemCategoryService",function(e){return e.getChildren("/Item/Mods")}]},ncyBreadcrumb:{label:"Mods"}}).state("root.mods.mode",{url:"/:mode",params:{level:"Mode"},views:{hierarchy:{template:"<mods-hierarchy user='userSession' children='children' getmodelabel='getModeLabel'></mods-hierarchy>",controller:["$scope","$stateParams","userSession","children",function(e,t,o,r){e.userSession=o,e.children=r,e.getModeLabel=function(){return t.mode}}]},items:{controller:["$scope",function(e){e.ncyBreadcrumbIgnore=!0}]}},resolve:{children:["itemCategoryService","$stateParams",function(e,t){return e.getChildren("/Item/Mods/"+t.mode)}]},ncyBreadcrumb:{label:"{{ getModeLabel() }}"}}).state("root.mods.type",{url:"/:mode/:type",params:{level:"Type"},views:{hierarchy:{template:"<mods-hierarchy user='userSession' children='children' getmodelabel='getModeLabel' gettypelabel='getTypeLabel'></mods-hierarchy>",controller:["$scope","$stateParams","userSession","children",function(e,t,o,r){e.userSession=o,e.children=r,e.getModeLabel=function(){return t.mode},e.getTypeLabel=function(){return t.type}}]},items:{template:"<mods-items user='userSession' children='children'></mods-items>",controller:["$scope","userSession","children",function(e,t,o){e.userSession=t,e.children=o,e.ncyBreadcrumbIgnore=!0}]}},resolve:{children:["itemCategoryService","$stateParams",function(e,t){return e.getChildren("/Item/Mods/"+t.mode+"/"+t.type)}]},ncyBreadcrumb:{parent:"root.mods.mode",label:"{{ getTypeLabel() }}"}}).state("root.mods.companion",{url:"/:mode/:type/:companion",params:{level:"Companion"},views:{hierarchy:{template:"<mods-hierarchy user='userSession' children='children' getmodelabel='getModeLabel' gettypelabel='getTypeLabel' getcompanionlabel='getCompanionLabel'></mods-hierarchy>",controller:["$scope","$stateParams","userSession","children",function(e,t,o,r){e.userSession=o,e.children=r,e.getModeLabel=function(){return t.mode},e.getTypeLabel=function(){return t.type},e.getCompanionLabel=function(){return t.companion}}]},items:{template:"<mods-items user='userSession' children='children'></mods-items>",controller:["$scope","userSession",function(e,t,o){e.userSession=t,e.children=o,e.ncyBreadcrumbIgnore=!0}]}},resolve:{children:["itemCategoryService","$stateParams",function(e,t){return e.getChildren("/Item/Mods/"+t.mode+"/"+t.type+"/"+t.companion)}]},ncyBreadcrumb:{parent:"root.mods.type",label:"{{ getCompanionLabel() }}"}})}]),l.run(["$rootScope","$state","$stateParams","$urlRouter",function(e,t,o,r){e.$state=t,e.$stateParams=o,e.$on("$stateChangeStart",function(e,t,o,r,n){a&&(console.log("state change start:"),console.log("from state:"),console.log(r),console.log(n),console.log("to state:"),console.log(t),console.log(o),console.log("\n\n\n"))})}])},{"./directives":6,"./services":12}],2:[function(e,t,o){"use strict";o.rootController=e("./root/rootController.js"),o.customNavBarController=e("./customNavBar/customNavBarController.js"),o.homeController=e("./home/homeController.js"),o.modsItemsController=e("./modsItems/modsItemsController.js"),o.modsHierarchyController=e("./modsHierarchy/modsHierarchyController.js"),o.logInController=e("./logIn/logInController.js"),o.newPostController=e("./newPost/newPostController.js")},{"./customNavBar/customNavBarController.js":3,"./home/homeController.js":5,"./logIn/logInController.js":7,"./modsHierarchy/modsHierarchyController.js":8,"./modsItems/modsItemsController.js":9,"./newPost/newPostController.js":10,"./root/rootController.js":11}],3:[function(e,t,o){"use strict";t.exports=["$scope","$http","$uibModal",function(e,t,o){var r=!1;e.ctrl=this,this.scope=e,r&&(console.log("scope:"),console.log(this.scope));var n={};this.newPost=function(){n.user=this.scope.user._id;var e=o.open({template:"<new-post item='item' cancel='cancel'></new-post>",controller:["$scope",function(t){t.item=n,t.cancel=e.dismiss}.bind(this)],backdrop:"static"})},this.logIn=function(){o.open({template:"<log-in></log-in>"})},this.logOut=function(){this.scope.user&&t.get("/api/logOut").success(function(e){r&&console.log("LogOut Successful!"),this.scope.user=e.user}.bind(this)).error(function(e){r&&console.log("LogOut Failed!")})}}]},{}],4:[function(e,t,o){"use strict";o.root=function(){return{restrict:"AE",controller:"rootController",templateUrl:"/ng/directives/root/rootView.html",scope:{user:"=user",children:"=children"}}},o.customNavBar=function(){return{restrict:"AE",controller:"customNavBarController",templateUrl:"/ng/directives/customNavBar/customNavBarView.html",scope:{user:"=user",children:"=children"}}},o.home=function(){return{restrict:"AE",controller:"homeController",templateUrl:"/ng/directives/home/homeView.html",scope:{user:"=user",children:"=children"}}},o.modsItems=function(){return{restrict:"AE",controller:"modsItemsController",templateUrl:"/ng/directives/modsItems/modsItemsView.html",scope:{user:"=user",children:"=children"}}},o.modsHierarchy=function(){return{restrict:"AE",controller:"modsHierarchyController",templateUrl:"/ng/directives/modsHierarchy/modsHierarchyView.html",scope:{user:"=user",children:"=children",getModeLabel:"=getmodelabel",getTypeLabel:"=gettypelabel",getCompanionLabel:"=getcompanionlabel"}}},o.logIn=function(){return{restrict:"AE",controller:"logInController",templateUrl:"/ng/directives/logIn/logInView.html"}},o.newPost=function(){return{restrict:"AE",controller:"newPostController",templateUrl:"/ng/directives/newPost/newPostView.html",scope:{newItem:"=item",cancel:"=cancel"}}}},{}],5:[function(e,t,o){"use strict";t.exports=["$scope",function(e){this.scope=e,this.scope.tempList=[];for(var t=0;100>t;++t)this.scope.tempList.push("Temp List Item "+t)}]},{}],6:[function(e,t,o){"use strict";!function r(t){var r=t.module("warframeDirectives",[]),o=e("./directives");for(var n in o)r.directive(n,o[n]);var s=e("./controllers");for(var n in s)r.controller(n,s[n])}(window.angular),t.exports="warframeDirectives"},{"./controllers":2,"./directives":4}],7:[function(e,t,o){"use strict";t.exports=["$scope",function(e){e.ctrl=this,this.scope=e}]},{}],8:[function(e,t,o){"use strict";t.exports=["$scope","$state",function(e,t){function o(){var o=t.params;switch(o.level){case"Mode":n.value="Type";break;case"Type":n.value="Companion";break;case"Companion":n.value="placeholderstate";break;default:n.value="Mode"}r&&(console.log("inside reloadDirective"),console.log("current state: "+t.current.name),console.log(e)),r&&(console.log("stateParams:"),console.log(o)),e.options=e.children,r&&(console.log("nextLevel:"),console.log(n),console.log("state:"),console.log(t),console.log("scope:"),console.log(e),console.log("\n\n\n"))}e.ctrl=this,this.scope=e;var r=!1,n={};this.toNextState=function(e){var o=t.params;o[n.value.toLowerCase()]=e,delete o.level,t.go("root.mods."+n.value.toLowerCase(),o)},o()}]},{}],9:[function(e,t,o){"use strict";t.exports=["$scope","$stateParams",function(e,t){e.ctrl=this,this.scope=e;this.scope.tempListItems=[];for(var o=0;5>o;++o)this.scope.tempListItems.push("tempListItem"+(o+1))}]},{}],10:[function(e,t,o){"use strict";t.exports=["$scope","$http",function(e,t){var o=!1;e.ctrl=this,this.scope=e,this.scope.transactions=["Deal","Auction"],this.scope.categories=["Mods","Sortie Weapons","Void Parts","Keys","Arcanes"],this.scope.datePicker={format:"yyyy-MM-dd",options:{minDate:new Date,startingDay:1}},this.submitPost=function(){var e=this.scope.newItem.category._id;this.scope.newItem.category.name=e,this.scope.newItem.category.parent=null,this.scope.newItem.category.ancestors=null,o&&console.log(this.scope),t.post("/api/item/new",this.scope.newItem,{headers:{"Content-Type":"application/json"}}).then(function(e){o&&(console.log("newPostController, submitPost success!"),console.log(e)),this.cancelPost()}.bind(this),function(e){o&&(console.log("newPostController, submitPost error!"),console.log(e))})},this.cancelPost=function(){this.scope.cancel()},this.scope.newItem.expiry||(this.scope.newItem.expiry=(new Date).setDate((new Date).getDate()+3)),this.scope.newItem.transaction||(this.scope.newItem.transaction=this.scope.transactions[0]),this.scope.newItem.category||(this.scope.newItem.category={_id:this.scope.categories[0]})}]},{}],11:[function(e,t,o){"use strict";t.exports=["$scope",function(e){e.ctrl=this,this.scope=e}]},{}],12:[function(e,t,o){"use strict";!function r(t){var r=t.module("warframeServices",[]),o=e("./services");for(var n in o)r.service(n,o[n])}(window.angular),t.exports="warframeServices"},{"./services":14}],13:[function(e,t,o){"use strict";t.exports=["$http","$q",function(e,t){var o={};return{getCategory:function(t){return o[t]&&void 0!==o[t].category?o[t].category:e.get("/api/category"+t).then(function(e){return o[t]||(o[t]={}),o[t].category=e.data.category,e.data.category},function(e){return null})},getChildren:function(t){return o[t]&&void 0!==o[t].children?o[t].children:e.get("/api/category/children"+t).then(function(e){return o[t]||(o[t]={}),e.data.children&&0!=e.data.children.length?(o[t].children=e.data.children.map(function(e){return e.name}),o[t].children):(o[t].children=null,null)},function(e){return null})}}}]},{}],14:[function(e,t,o){"use strict";o.userSessionService=e("./userSessionService"),o.itemCategoryService=e("./itemCategoryService")},{"./itemCategoryService":13,"./userSessionService":15}],15:[function(e,t,o){"use strict";t.exports=["$http","$q",function(e,t){return{getUserSession:function(){return e.get("/api/me").then(function(e){return e.data.user},function(e){return null})}}}]},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMubWluLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9kaXJlY3RpdmVzIiwiX2RpcmVjdGl2ZXMyIiwiX3NlcnZpY2VzIiwiX3NlcnZpY2VzMiIsImFwcCIsImFuZ3VsYXIiLCJkZWJ1ZyIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsIiIsInRlbXBsYXRlIiwibmF2YmFyQHJvb3QiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwidXNlclNlc3Npb24iLCJib2R5QHJvb3QiLCJjaGlsZHJlbiIsInJlc29sdmUiLCJ1c2VyU2Vzc2lvblNlcnZpY2UiLCJnZXRVc2VyU2Vzc2lvbiIsIml0ZW1DYXRlZ29yeVNlcnZpY2UiLCIkc3RhdGUiLCJnZXRDaGlsZHJlbiIsIm5jeUJyZWFkY3J1bWIiLCJsYWJlbCIsImJyZWFkY3J1bWIiLCJib2R5IiwidGVtcGxhdGVVcmwiLCJoaWVyYXJjaHlAcm9vdC5tb2RzIiwicGFyYW1zIiwibGV2ZWwiLCJoaWVyYXJjaHkiLCIkc3RhdGVQYXJhbXMiLCJnZXRNb2RlTGFiZWwiLCJtb2RlIiwiaXRlbXMiLCJuY3lCcmVhZGNydW1iSWdub3JlIiwiZ2V0VHlwZUxhYmVsIiwidHlwZSIsInBhcmVudCIsImdldENvbXBhbmlvbkxhYmVsIiwiY29tcGFuaW9uIiwicnVuIiwiJHJvb3RTY29wZSIsIiR1cmxSb3V0ZXIiLCIkb24iLCJldnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiY29uc29sZSIsImxvZyIsIi4vZGlyZWN0aXZlcyIsIi4vc2VydmljZXMiLCIyIiwicm9vdENvbnRyb2xsZXIiLCJjdXN0b21OYXZCYXJDb250cm9sbGVyIiwiaG9tZUNvbnRyb2xsZXIiLCJtb2RzSXRlbXNDb250cm9sbGVyIiwibW9kc0hpZXJhcmNoeUNvbnRyb2xsZXIiLCJsb2dJbkNvbnRyb2xsZXIiLCJuZXdQb3N0Q29udHJvbGxlciIsIi4vY3VzdG9tTmF2QmFyL2N1c3RvbU5hdkJhckNvbnRyb2xsZXIuanMiLCIuL2hvbWUvaG9tZUNvbnRyb2xsZXIuanMiLCIuL2xvZ0luL2xvZ0luQ29udHJvbGxlci5qcyIsIi4vbW9kc0hpZXJhcmNoeS9tb2RzSGllcmFyY2h5Q29udHJvbGxlci5qcyIsIi4vbW9kc0l0ZW1zL21vZHNJdGVtc0NvbnRyb2xsZXIuanMiLCIuL25ld1Bvc3QvbmV3UG9zdENvbnRyb2xsZXIuanMiLCIuL3Jvb3Qvcm9vdENvbnRyb2xsZXIuanMiLCIzIiwiJGh0dHAiLCIkdWliTW9kYWwiLCJjdHJsIiwidGhpcyIsInNjb3BlIiwiaXRlbSIsIm5ld1Bvc3QiLCJ1c2VyIiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJjYW5jZWwiLCJkaXNtaXNzIiwiYmluZCIsImJhY2tkcm9wIiwibG9nSW4iLCJsb2dPdXQiLCJnZXQiLCJzdWNjZXNzIiwicmVzIiwiZXJyb3IiLCJlcnIiLCI0Iiwicm9vdCIsInJlc3RyaWN0IiwiY3VzdG9tTmF2QmFyIiwiaG9tZSIsIm1vZHNJdGVtcyIsIm1vZHNIaWVyYXJjaHkiLCJuZXdJdGVtIiwiNSIsInRlbXBMaXN0IiwicHVzaCIsIjYiLCJ3YXJmcmFtZURpcmVjdGl2ZXMiLCJkaXJlY3RpdmVzIiwibmFtZSIsImRpcmVjdGl2ZSIsImRpcmVjdGl2ZUNvbnRyb2xsZXJzIiwid2luZG93IiwiLi9jb250cm9sbGVycyIsIjciLCI4IiwicmVsb2FkRGlyZWN0aXZlIiwic3RhdGVQYXJhbXMiLCJuZXh0TGV2ZWwiLCJ2YWx1ZSIsImN1cnJlbnQiLCJvcHRpb25zIiwidG9OZXh0U3RhdGUiLCJzZWxlY3RlZE9wdGlvbiIsIm5leHRQYXJhbXMiLCJ0b0xvd2VyQ2FzZSIsImdvIiwiOSIsInRlbXBMaXN0SXRlbXMiLCIxMCIsInRyYW5zYWN0aW9ucyIsImNhdGVnb3JpZXMiLCJkYXRlUGlja2VyIiwiZm9ybWF0IiwibWluRGF0ZSIsIkRhdGUiLCJzdGFydGluZ0RheSIsInN1Ym1pdFBvc3QiLCJjYXRlZ29yeSIsImFuY2VzdG9ycyIsInBvc3QiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwidGhlbiIsImNhbmNlbFBvc3QiLCJleHBpcnkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInRyYW5zYWN0aW9uIiwiX2lkIiwiMTEiLCIxMiIsIndhcmZyYW1lU2VydmljZXMiLCJzZXJ2aWNlcyIsInNlcnZpY2UiLCIxMyIsIiRxIiwiY2FjaGUiLCJnZXRDYXRlZ29yeSIsInBhdGgiLCJ1bmRlZmluZWQiLCJkYXRhIiwibWFwIiwiMTQiLCIuL2l0ZW1DYXRlZ29yeVNlcnZpY2UiLCIuL3VzZXJTZXNzaW9uU2VydmljZSIsIjE1Il0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFVQSxHQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFFBQVNDLEdBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxHQUFJRSxHQUFrQixrQkFBVEMsVUFBcUJBLE9BQVEsS0FBSUYsR0FBR0MsRUFBRSxNQUFPQSxHQUFFRixHQUFFLEVBQUksSUFBR0ksRUFBRSxNQUFPQSxHQUFFSixHQUFFLEVBQUksSUFBSUssR0FBRSxHQUFJQyxPQUFNLHVCQUF1Qk4sRUFBRSxJQUFLLE1BQU1LLEdBQUVFLEtBQUssbUJBQW1CRixFQUFFLEdBQUlHLEdBQUVYLEVBQUVHLElBQUlTLFdBQVliLEdBQUVJLEdBQUcsR0FBR1UsS0FBS0YsRUFBRUMsUUFBUSxTQUFTZCxHQUFHLEdBQUlFLEdBQUVELEVBQUVJLEdBQUcsR0FBR0wsRUFBRyxPQUFPSSxHQUFFRixFQUFFQSxFQUFFRixJQUFJYSxFQUFFQSxFQUFF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aUJBTVRxRSxJQUFJLFNBQVNwTCxFQUFRVSxFQUFPSixHQUNsQyxZQUVBQSxHQUFRZ0MsbUJBQXFCdEMsRUFBUSx3QkFFckNNLEVBQVFrQyxvQkFBc0J4QyxFQUFRLDJCQUVuQ3FMLHdCQUF3QixHQUFHQyx1QkFBdUIsS0FBS0MsSUFBSSxTQUFTdkwsRUFBUVUsRUFBT0osR0FDdEYsWUFFQUksR0FBT0osU0FBVyxRQUFTLEtBQU0sU0FBVXFGLEVBQU9rRixHQUNoRCxPQUNFdEksZUFBZ0IsV0FDZCxNQUFPb0QsR0FBTWdCLElBQUksV0FBV3FELEtBQUssU0FBaUJuRCxHQUVoRCxNQUFPQSxHQUFJcUUsS0FBS2hGLE1BQ2YsU0FBZWEsR0FFaEIsTUFBTyxzQkFNSiIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG52YXIgX2RpcmVjdGl2ZXMgPSByZXF1aXJlKFwiLi9kaXJlY3RpdmVzXCIpO1xuXG52YXIgX2RpcmVjdGl2ZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlyZWN0aXZlcyk7XG5cbnZhciBfc2VydmljZXMgPSByZXF1aXJlKFwiLi9zZXJ2aWNlc1wiKTtcblxudmFyIF9zZXJ2aWNlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJ2aWNlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwid2FyZnJhbWVUcmFkZVwiLCBbXG4vLyBFeHRlcm5hbCBkZXBlbmRlbmNpZXMgaW5jbHVkZWQgaW4gY2xpZW50L3ZlbmRvcnMvc2NyaXB0cy5qcyFcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcIndhcmZyYW1lVHJhZGVcIiwgW1wibmdBbmltYXRlXCIsIFwibmdUb3VjaFwiLCBcInVpLmJvb3RzdHJhcFwiLCBcInVpLnJvdXRlclwiLCBcIm5jeS1hbmd1bGFyLWJyZWFkY3J1bWJcIiwgXCJuZ1Njcm9sbGFibGVcIixcbi8vcmVxdWlyZShcIi4vZGlyZWN0aXZlc1wiKSxcbi8vcmVxdWlyZShcIi4vc2VydmljZXNcIilcbl9kaXJlY3RpdmVzMi5kZWZhdWx0LCBfc2VydmljZXMyLmRlZmF1bHRdKTtcbnZhciBkZWJ1ZyA9IGZhbHNlO1xuXG5hcHAuY29uZmlnKFtcIiRzdGF0ZVByb3ZpZGVyXCIsIFwiJHVybFJvdXRlclByb3ZpZGVyXCIsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvaG9tZVwiKTtcblxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcInJvb3RcIiwge1xuICAgIHVybDogXCIvaG9tZVwiLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIlwiOiB7IHRlbXBsYXRlOiBcIjxyb290Pjwvcm9vdD5cIiB9LFxuICAgICAgXCJuYXZiYXJAcm9vdFwiOiB7XG4gICAgICAgIHRlbXBsYXRlOiBcIjxjdXN0b20tbmF2LWJhclwiICsgXCIgdXNlcj0ndXNlclNlc3Npb24nXCIgKyBcIj48L2N1c3RvbS1uYXYtYmFyPlwiLFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCJ1c2VyU2Vzc2lvblwiLCBmdW5jdGlvbiAoJHNjb3BlLCB1c2VyU2Vzc2lvbikge1xuICAgICAgICAgICRzY29wZS51c2VyU2Vzc2lvbiA9IHVzZXJTZXNzaW9uO1xuICAgICAgICB9XVxuICAgICAgfSxcbiAgICAgIFwiYm9keUByb290XCI6IHtcbiAgICAgICAgdGVtcGxhdGU6IFwiPGhvbWVcIiArIFwiIHVzZXI9J3VzZXJTZXNzaW9uJ1wiICsgXCIgY2hpbGRyZW49J2NoaWxkcmVuJ1wiICsgXCI+PC9ob21lPlwiLFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCJ1c2VyU2Vzc2lvblwiLCBcImNoaWxkcmVuXCIsIGZ1bmN0aW9uICgkc2NvcGUsIHVzZXJTZXNzaW9uLCBjaGlsZHJlbikge1xuICAgICAgICAgICRzY29wZS51c2VyU2Vzc2lvbiA9IHVzZXJTZXNzaW9uO1xuICAgICAgICAgICRzY29wZS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB9XVxuICAgICAgfVxuICAgIH0sXG4gICAgcmVzb2x2ZToge1xuICAgICAgdXNlclNlc3Npb246IFtcInVzZXJTZXNzaW9uU2VydmljZVwiLCBmdW5jdGlvbiAodXNlclNlc3Npb25TZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiB1c2VyU2Vzc2lvblNlcnZpY2UuZ2V0VXNlclNlc3Npb24oKTtcbiAgICAgIH1dLFxuICAgICAgY2hpbGRyZW46IFtcIml0ZW1DYXRlZ29yeVNlcnZpY2VcIiwgZnVuY3Rpb24gKGl0ZW1DYXRlZ29yeVNlcnZpY2UsICRzdGF0ZSkge1xuICAgICAgICByZXR1cm4gaXRlbUNhdGVnb3J5U2VydmljZS5nZXRDaGlsZHJlbihcIi9JdGVtXCIpO1xuICAgICAgfV1cbiAgICB9LFxuICAgIG5jeUJyZWFkY3J1bWI6IHtcbiAgICAgIGxhYmVsOiBcIkhvbWVcIlxuICAgIH1cbiAgfSkuc3RhdGUoXCJyb290Lm1vZHNcIiwge1xuICAgIHVybDogXCIvbW9kc1wiLFxuICAgIHZpZXdzOiB7XG4gICAgICBcImJyZWFkY3J1bWJcIjogeyB0ZW1wbGF0ZTogXCI8ZGl2IG5jeS1icmVhZGNydW1iPjwvZGl2PlwiIH0sXG4gICAgICBcImJvZHlcIjoge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCIvbmcvdGVtcGxhdGVzL3Jvb3QtbW9kcy1ib2R5LXRlbXBsYXRlLmh0bWxcIlxuICAgICAgfSxcbiAgICAgIFwiaGllcmFyY2h5QHJvb3QubW9kc1wiOiB7XG4gICAgICAgIHRlbXBsYXRlOiBcIjxtb2RzLWhpZXJhcmNoeVwiICsgXCIgdXNlcj0ndXNlclNlc3Npb24nXCIgKyBcIiBjaGlsZHJlbj0nY2hpbGRyZW4nXCIgKyBcIj48L21vZHMtaGllcmFyY2h5PlwiLFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCJ1c2VyU2Vzc2lvblwiLCBcImNoaWxkcmVuXCIsIGZ1bmN0aW9uICgkc2NvcGUsIHVzZXJTZXNzaW9uLCBjaGlsZHJlbikge1xuICAgICAgICAgICRzY29wZS51c2VyU2Vzc2lvbiA9IHVzZXJTZXNzaW9uO1xuICAgICAgICAgICRzY29wZS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB9XVxuICAgICAgfVxuICAgIH0sXG4gICAgcmVzb2x2ZToge1xuICAgICAgY2hpbGRyZW46IFtcIml0ZW1DYXRlZ29yeVNlcnZpY2VcIiwgZnVuY3Rpb24gKGl0ZW1DYXRlZ29yeVNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1DYXRlZ29yeVNlcnZpY2UuZ2V0Q2hpbGRyZW4oXCIvSXRlbS9Nb2RzXCIpO1xuICAgICAgfV1cbiAgICB9LFxuICAgIG5jeUJyZWFkY3J1bWI6IHtcbiAgICAgIGxhYmVsOiBcIk1vZHNcIlxuICAgIH1cbiAgfSkuc3RhdGUoXCJyb290Lm1vZHMubW9kZVwiLCB7XG4gICAgdXJsOiBcIi86bW9kZVwiLFxuICAgIHBhcmFtczoge1xuICAgICAgbGV2ZWw6IFwiTW9kZVwiXG4gICAgfSxcbiAgICB2aWV3czoge1xuICAgICAgXCJoaWVyYXJjaHlcIjoge1xuICAgICAgICB0ZW1wbGF0ZTogXCI8bW9kcy1oaWVyYXJjaHlcIiArIFwiIHVzZXI9J3VzZXJTZXNzaW9uJ1wiICsgXCIgY2hpbGRyZW49J2NoaWxkcmVuJ1wiICsgXCIgZ2V0bW9kZWxhYmVsPSdnZXRNb2RlTGFiZWwnXCIgKyBcIj48L21vZHMtaGllcmFyY2h5PlwiLFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkc3RhdGVQYXJhbXNcIiwgXCJ1c2VyU2Vzc2lvblwiLCBcImNoaWxkcmVuXCIsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZVBhcmFtcywgdXNlclNlc3Npb24sIGNoaWxkcmVuKSB7XG4gICAgICAgICAgJHNjb3BlLnVzZXJTZXNzaW9uID0gdXNlclNlc3Npb247XG4gICAgICAgICAgJHNjb3BlLmNoaWxkcmVuID0gY2hpbGRyZW47XG5cbiAgICAgICAgICAkc2NvcGUuZ2V0TW9kZUxhYmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZVBhcmFtcy5tb2RlO1xuICAgICAgICAgIH07XG4gICAgICAgIH1dXG4gICAgICB9LFxuICAgICAgXCJpdGVtc1wiOiB7XG4gICAgICAgIGNvbnRyb2xsZXI6IFtcIiRzY29wZVwiLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gICAgICAgICAgLy8gTXVzdCBleHBsaWNpdGx5IHNldCBicmVhZGNydW1iIGlnbm9yZSBmb3IgbXVsdGl2aWV3IHNjb3Blc1xuICAgICAgICAgICRzY29wZS5uY3lCcmVhZGNydW1iSWdub3JlID0gdHJ1ZTtcbiAgICAgICAgfV1cbiAgICAgIH1cbiAgICB9LFxuICAgIHJlc29sdmU6IHtcbiAgICAgIGNoaWxkcmVuOiBbXCJpdGVtQ2F0ZWdvcnlTZXJ2aWNlXCIsIFwiJHN0YXRlUGFyYW1zXCIsIGZ1bmN0aW9uIChpdGVtQ2F0ZWdvcnlTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1DYXRlZ29yeVNlcnZpY2UuZ2V0Q2hpbGRyZW4oXCIvSXRlbS9Nb2RzL1wiICsgJHN0YXRlUGFyYW1zLm1vZGUpO1xuICAgICAgfV1cbiAgICB9LFxuICAgIG5jeUJyZWFkY3J1bWI6IHtcbiAgICAgIGxhYmVsOiBcInt7IGdldE1vZGVMYWJlbCgpIH19XCJcbiAgICB9XG4gIH0pLnN0YXRlKFwicm9vdC5tb2RzLnR5cGVcIiwge1xuICAgIHVybDogXCIvOm1vZGUvOnR5cGVcIixcbiAgICBwYXJhbXM6IHtcbiAgICAgIGxldmVsOiBcIlR5cGVcIlxuICAgIH0sXG4gICAgdmlld3M6IHtcbiAgICAgIFwiaGllcmFyY2h5XCI6IHtcbiAgICAgICAgdGVtcGxhdGU6IFwiPG1vZHMtaGllcmFyY2h5XCIgKyBcIiB1c2VyPSd1c2VyU2Vzc2lvbidcIiArIFwiIGNoaWxkcmVuPSdjaGlsZHJlbidcIiArIFwiIGdldG1vZGVsYWJlbD0nZ2V0TW9kZUxhYmVsJ1wiICsgXCIgZ2V0dHlwZWxhYmVsPSdnZXRUeXBlTGFiZWwnXCIgKyBcIj48L21vZHMtaGllcmFyY2h5PlwiLFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkc3RhdGVQYXJhbXNcIiwgXCJ1c2VyU2Vzc2lvblwiLCBcImNoaWxkcmVuXCIsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZVBhcmFtcywgdXNlclNlc3Npb24sIGNoaWxkcmVuKSB7XG4gICAgICAgICAgJHNjb3BlLnVzZXJTZXNzaW9uID0gdXNlclNlc3Npb247XG4gICAgICAgICAgJHNjb3BlLmNoaWxkcmVuID0gY2hpbGRyZW47XG5cbiAgICAgICAgICAkc2NvcGUuZ2V0TW9kZUxhYmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZVBhcmFtcy5tb2RlO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAkc2NvcGUuZ2V0VHlwZUxhYmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZVBhcmFtcy50eXBlO1xuICAgICAgICAgIH07XG4gICAgICAgIH1dXG4gICAgICB9LFxuICAgICAgXCJpdGVtc1wiOiB7XG4gICAgICAgIHRlbXBsYXRlOiBcIjxtb2RzLWl0ZW1zXCIgKyBcIiB1c2VyPSd1c2VyU2Vzc2lvbidcIiArIFwiIGNoaWxkcmVuPSdjaGlsZHJlbidcIiArIFwiPjwvbW9kcy1pdGVtcz5cIixcbiAgICAgICAgY29udHJvbGxlcjogW1wiJHNjb3BlXCIsIFwidXNlclNlc3Npb25cIiwgXCJjaGlsZHJlblwiLCBmdW5jdGlvbiAoJHNjb3BlLCB1c2VyU2Vzc2lvbiwgY2hpbGRyZW4pIHtcbiAgICAgICAgICAkc2NvcGUudXNlclNlc3Npb24gPSB1c2VyU2Vzc2lvbjtcbiAgICAgICAgICAkc2NvcGUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblxuICAgICAgICAgIC8vIE11c3QgZXhwbGljaXRseSBzZXQgYnJlYWRjcnVtYiBpZ25vcmUgZm9yIG11bHRpdmlldyBzY29wZXNcbiAgICAgICAgICAkc2NvcGUubmN5QnJlYWRjcnVtYklnbm9yZSA9IHRydWU7XG4gICAgICAgIH1dXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICBjaGlsZHJlbjogW1wiaXRlbUNhdGVnb3J5U2VydmljZVwiLCBcIiRzdGF0ZVBhcmFtc1wiLCBmdW5jdGlvbiAoaXRlbUNhdGVnb3J5U2VydmljZSwgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBpdGVtQ2F0ZWdvcnlTZXJ2aWNlLmdldENoaWxkcmVuKFwiL0l0ZW0vTW9kcy9cIiArICRzdGF0ZVBhcmFtcy5tb2RlICsgXCIvXCIgKyAkc3RhdGVQYXJhbXMudHlwZSk7XG4gICAgICB9XVxuICAgIH0sXG4gICAgbmN5QnJlYWRjcnVtYjoge1xuICAgICAgcGFyZW50OiBcInJvb3QubW9kcy5tb2RlXCIsXG4gICAgICBsYWJlbDogXCJ7eyBnZXRUeXBlTGFiZWwoKSB9fVwiXG4gICAgfVxuICB9KS5zdGF0ZShcInJvb3QubW9kcy5jb21wYW5pb25cIiwge1xuICAgIHVybDogXCIvOm1vZGUvOnR5cGUvOmNvbXBhbmlvblwiLFxuICAgIHBhcmFtczoge1xuICAgICAgbGV2ZWw6IFwiQ29tcGFuaW9uXCJcbiAgICB9LFxuICAgIHZpZXdzOiB7XG4gICAgICBcImhpZXJhcmNoeVwiOiB7XG4gICAgICAgIHRlbXBsYXRlOiBcIjxtb2RzLWhpZXJhcmNoeVwiICsgXCIgdXNlcj0ndXNlclNlc3Npb24nXCIgKyBcIiBjaGlsZHJlbj0nY2hpbGRyZW4nXCIgKyBcIiBnZXRtb2RlbGFiZWw9J2dldE1vZGVMYWJlbCdcIiArIFwiIGdldHR5cGVsYWJlbD0nZ2V0VHlwZUxhYmVsJ1wiICsgXCIgZ2V0Y29tcGFuaW9ubGFiZWw9J2dldENvbXBhbmlvbkxhYmVsJ1wiICsgXCI+PC9tb2RzLWhpZXJhcmNoeT5cIixcbiAgICAgICAgY29udHJvbGxlcjogW1wiJHNjb3BlXCIsIFwiJHN0YXRlUGFyYW1zXCIsIFwidXNlclNlc3Npb25cIiwgXCJjaGlsZHJlblwiLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGVQYXJhbXMsIHVzZXJTZXNzaW9uLCBjaGlsZHJlbikge1xuICAgICAgICAgICRzY29wZS51c2VyU2Vzc2lvbiA9IHVzZXJTZXNzaW9uO1xuICAgICAgICAgICRzY29wZS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXG4gICAgICAgICAgJHNjb3BlLmdldE1vZGVMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkc3RhdGVQYXJhbXMubW9kZTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgJHNjb3BlLmdldFR5cGVMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkc3RhdGVQYXJhbXMudHlwZTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgJHNjb3BlLmdldENvbXBhbmlvbkxhYmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZVBhcmFtcy5jb21wYW5pb247XG4gICAgICAgICAgfTtcbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICBcIml0ZW1zXCI6IHtcbiAgICAgICAgdGVtcGxhdGU6IFwiPG1vZHMtaXRlbXNcIiArIFwiIHVzZXI9J3VzZXJTZXNzaW9uJ1wiICsgXCIgY2hpbGRyZW49J2NoaWxkcmVuJ1wiICsgXCI+PC9tb2RzLWl0ZW1zPlwiLFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCJ1c2VyU2Vzc2lvblwiLCBmdW5jdGlvbiAoJHNjb3BlLCB1c2VyU2Vzc2lvbiwgY2hpbGRyZW4pIHtcbiAgICAgICAgICAkc2NvcGUudXNlclNlc3Npb24gPSB1c2VyU2Vzc2lvbjtcbiAgICAgICAgICAkc2NvcGUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblxuICAgICAgICAgIC8vIE11c3QgZXhwbGljaXRseSBzZXQgYnJlYWRjcnVtYiBpZ25vcmUgZm9yIG11bHRpdmlldyBzY29wZXNcbiAgICAgICAgICAkc2NvcGUubmN5QnJlYWRjcnVtYklnbm9yZSA9IHRydWU7XG4gICAgICAgIH1dXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICBjaGlsZHJlbjogW1wiaXRlbUNhdGVnb3J5U2VydmljZVwiLCBcIiRzdGF0ZVBhcmFtc1wiLCBmdW5jdGlvbiAoaXRlbUNhdGVnb3J5U2VydmljZSwgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBpdGVtQ2F0ZWdvcnlTZXJ2aWNlLmdldENoaWxkcmVuKFwiL0l0ZW0vTW9kcy9cIiArICRzdGF0ZVBhcmFtcy5tb2RlICsgXCIvXCIgKyAkc3RhdGVQYXJhbXMudHlwZSArIFwiL1wiICsgJHN0YXRlUGFyYW1zLmNvbXBhbmlvbik7XG4gICAgICB9XVxuICAgIH0sXG4gICAgbmN5QnJlYWRjcnVtYjoge1xuICAgICAgcGFyZW50OiBcInJvb3QubW9kcy50eXBlXCIsXG4gICAgICBsYWJlbDogXCJ7eyBnZXRDb21wYW5pb25MYWJlbCgpIH19XCJcbiAgICB9XG4gIH0pO1xufV0pO1xuXG5hcHAucnVuKFtcIiRyb290U2NvcGVcIiwgXCIkc3RhdGVcIiwgXCIkc3RhdGVQYXJhbXNcIiwgXCIkdXJsUm91dGVyXCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHVybFJvdXRlcikge1xuICAkcm9vdFNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcbiAgJHJvb3RTY29wZS4kc3RhdGVQYXJhbXMgPSAkc3RhdGVQYXJhbXM7XG5cbiAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbiAoZXZ0LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKSB7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInN0YXRlIGNoYW5nZSBzdGFydDpcIik7XG4gICAgICBjb25zb2xlLmxvZyhcImZyb20gc3RhdGU6XCIpO1xuICAgICAgY29uc29sZS5sb2coZnJvbVN0YXRlKTtcbiAgICAgIGNvbnNvbGUubG9nKGZyb21QYXJhbXMpO1xuICAgICAgY29uc29sZS5sb2coXCJ0byBzdGF0ZTpcIik7XG4gICAgICBjb25zb2xlLmxvZyh0b1N0YXRlKTtcbiAgICAgIGNvbnNvbGUubG9nKHRvUGFyYW1zKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiXFxuXFxuXFxuXCIpO1xuICAgIH1cbiAgfSk7XG59XSk7XG5cbn0se1wiLi9kaXJlY3RpdmVzXCI6NixcIi4vc2VydmljZXNcIjoxMn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMucm9vdENvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi9yb290L3Jvb3RDb250cm9sbGVyLmpzXCIpO1xuXG5leHBvcnRzLmN1c3RvbU5hdkJhckNvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi9jdXN0b21OYXZCYXIvY3VzdG9tTmF2QmFyQ29udHJvbGxlci5qc1wiKTtcblxuZXhwb3J0cy5ob21lQ29udHJvbGxlciA9IHJlcXVpcmUoXCIuL2hvbWUvaG9tZUNvbnRyb2xsZXIuanNcIik7XG5cbmV4cG9ydHMubW9kc0l0ZW1zQ29udHJvbGxlciA9IHJlcXVpcmUoXCIuL21vZHNJdGVtcy9tb2RzSXRlbXNDb250cm9sbGVyLmpzXCIpO1xuXG5leHBvcnRzLm1vZHNIaWVyYXJjaHlDb250cm9sbGVyID0gcmVxdWlyZShcIi4vbW9kc0hpZXJhcmNoeS9tb2RzSGllcmFyY2h5Q29udHJvbGxlci5qc1wiKTtcblxuZXhwb3J0cy5sb2dJbkNvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi9sb2dJbi9sb2dJbkNvbnRyb2xsZXIuanNcIik7XG5cbmV4cG9ydHMubmV3UG9zdENvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi9uZXdQb3N0L25ld1Bvc3RDb250cm9sbGVyLmpzXCIpO1xuXG59LHtcIi4vY3VzdG9tTmF2QmFyL2N1c3RvbU5hdkJhckNvbnRyb2xsZXIuanNcIjozLFwiLi9ob21lL2hvbWVDb250cm9sbGVyLmpzXCI6NSxcIi4vbG9nSW4vbG9nSW5Db250cm9sbGVyLmpzXCI6NyxcIi4vbW9kc0hpZXJhcmNoeS9tb2RzSGllcmFyY2h5Q29udHJvbGxlci5qc1wiOjgsXCIuL21vZHNJdGVtcy9tb2RzSXRlbXNDb250cm9sbGVyLmpzXCI6OSxcIi4vbmV3UG9zdC9uZXdQb3N0Q29udHJvbGxlci5qc1wiOjEwLFwiLi9yb290L3Jvb3RDb250cm9sbGVyLmpzXCI6MTF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFtcIiRzY29wZVwiLCBcIiRodHRwXCIsIFwiJHVpYk1vZGFsXCIsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkdWliTW9kYWwpIHtcbiAgdmFyIGRlYnVnID0gZmFsc2U7XG5cbiAgJHNjb3BlLmN0cmwgPSB0aGlzO1xuICB0aGlzLnNjb3BlID0gJHNjb3BlO1xuXG4gIGlmIChkZWJ1Zykge1xuICAgIGNvbnNvbGUubG9nKFwic2NvcGU6XCIpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc2NvcGUpO1xuICB9XG5cbiAgLypcbiAgICogSXRlbSB3aXRoaW4gY29udHJvbGxlciBzY29wZSwgc28gbmV3IHBvc3QgbW9kYWxcbiAgICogcmV0YWlucyBwcmV2aW91cyBmaWVsZHMgdXBvbiByZS1vcGVuL2Nsb3NlXG4gICAqL1xuICB2YXIgaXRlbSA9IHt9O1xuXG4gIHRoaXMubmV3UG9zdCA9IGZ1bmN0aW9uIG5ld1Bvc3QoKSB7XG4gICAgaXRlbS51c2VyID0gdGhpcy5zY29wZS51c2VyW1wiX2lkXCJdO1xuXG4gICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG4gICAgICB0ZW1wbGF0ZTogXCI8bmV3LXBvc3RcIiArIFwiIGl0ZW09J2l0ZW0nXCIgKyBcIiBjYW5jZWw9J2NhbmNlbCdcIiArIFwiPjwvbmV3LXBvc3Q+XCIsXG4gICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUuaXRlbSA9IGl0ZW07XG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBtb2RhbEluc3RhbmNlLmRpc21pc3M7XG4gICAgICB9LmJpbmQodGhpcyldLFxuICAgICAgLy8gU28gdXNlciBjYW5ub3QgYWNjaWRlbnRhbGx5IGNsb3NlIG1vZGFsIGJ5IGNsaWNraW5nIG91dHNpZGVcbiAgICAgIGJhY2tkcm9wOiBcInN0YXRpY1wiXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5sb2dJbiA9IGZ1bmN0aW9uIGxvZ0luKCkge1xuICAgIHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuICAgICAgdGVtcGxhdGU6IFwiPGxvZy1pbj48L2xvZy1pbj5cIlxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMubG9nT3V0ID0gZnVuY3Rpb24gbG9nT3V0KCkge1xuICAgIGlmICghdGhpcy5zY29wZS51c2VyKSByZXR1cm47XG5cbiAgICAkaHR0cC5nZXQoXCIvYXBpL2xvZ091dFwiKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coXCJMb2dPdXQgU3VjY2Vzc2Z1bCFcIik7XG5cbiAgICAgIHRoaXMuc2NvcGUudXNlciA9IHJlcy51c2VyO1xuICAgIH0uYmluZCh0aGlzKSkuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZyhcIkxvZ091dCBGYWlsZWQhXCIpO1xuICAgIH0pO1xuICB9O1xufV07XG5cbn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMucm9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBRVwiLFxuICAgIGNvbnRyb2xsZXI6IFwicm9vdENvbnRyb2xsZXJcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvbmcvZGlyZWN0aXZlcy9yb290L3Jvb3RWaWV3Lmh0bWxcIixcbiAgICBzY29wZToge1xuICAgICAgdXNlcjogXCI9dXNlclwiLFxuICAgICAgY2hpbGRyZW46IFwiPWNoaWxkcmVuXCJcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnRzLmN1c3RvbU5hdkJhciA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBRVwiLFxuICAgIGNvbnRyb2xsZXI6IFwiY3VzdG9tTmF2QmFyQ29udHJvbGxlclwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi9uZy9kaXJlY3RpdmVzL2N1c3RvbU5hdkJhci9jdXN0b21OYXZCYXJWaWV3Lmh0bWxcIixcbiAgICBzY29wZToge1xuICAgICAgdXNlcjogXCI9dXNlclwiLFxuICAgICAgY2hpbGRyZW46IFwiPWNoaWxkcmVuXCJcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnRzLmhvbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQUVcIixcbiAgICBjb250cm9sbGVyOiBcImhvbWVDb250cm9sbGVyXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL25nL2RpcmVjdGl2ZXMvaG9tZS9ob21lVmlldy5odG1sXCIsXG4gICAgc2NvcGU6IHtcbiAgICAgIHVzZXI6IFwiPXVzZXJcIixcbiAgICAgIGNoaWxkcmVuOiBcIj1jaGlsZHJlblwiXG4gICAgfVxuICB9O1xufTtcblxuZXhwb3J0cy5tb2RzSXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQUVcIixcbiAgICBjb250cm9sbGVyOiBcIm1vZHNJdGVtc0NvbnRyb2xsZXJcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvbmcvZGlyZWN0aXZlcy9tb2RzSXRlbXMvbW9kc0l0ZW1zVmlldy5odG1sXCIsXG4gICAgc2NvcGU6IHtcbiAgICAgIHVzZXI6IFwiPXVzZXJcIixcbiAgICAgIGNoaWxkcmVuOiBcIj1jaGlsZHJlblwiXG4gICAgfVxuICB9O1xufTtcblxuZXhwb3J0cy5tb2RzSGllcmFyY2h5ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFFXCIsXG4gICAgY29udHJvbGxlcjogXCJtb2RzSGllcmFyY2h5Q29udHJvbGxlclwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi9uZy9kaXJlY3RpdmVzL21vZHNIaWVyYXJjaHkvbW9kc0hpZXJhcmNoeVZpZXcuaHRtbFwiLFxuICAgIHNjb3BlOiB7XG4gICAgICB1c2VyOiBcIj11c2VyXCIsXG4gICAgICBjaGlsZHJlbjogXCI9Y2hpbGRyZW5cIixcbiAgICAgIGdldE1vZGVMYWJlbDogXCI9Z2V0bW9kZWxhYmVsXCIsXG4gICAgICBnZXRUeXBlTGFiZWw6IFwiPWdldHR5cGVsYWJlbFwiLFxuICAgICAgZ2V0Q29tcGFuaW9uTGFiZWw6IFwiPWdldGNvbXBhbmlvbmxhYmVsXCJcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnRzLmxvZ0luID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFFXCIsXG4gICAgY29udHJvbGxlcjogXCJsb2dJbkNvbnRyb2xsZXJcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvbmcvZGlyZWN0aXZlcy9sb2dJbi9sb2dJblZpZXcuaHRtbFwiXG4gIH07XG59O1xuXG5leHBvcnRzLm5ld1Bvc3QgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQUVcIixcbiAgICBjb250cm9sbGVyOiBcIm5ld1Bvc3RDb250cm9sbGVyXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL25nL2RpcmVjdGl2ZXMvbmV3UG9zdC9uZXdQb3N0Vmlldy5odG1sXCIsXG4gICAgc2NvcGU6IHtcbiAgICAgIG5ld0l0ZW06IFwiPWl0ZW1cIixcbiAgICAgIGNhbmNlbDogXCI9Y2FuY2VsXCJcbiAgICB9XG4gIH07XG59O1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFtcIiRzY29wZVwiLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gIHRoaXMuc2NvcGUgPSAkc2NvcGU7XG5cbiAgdGhpcy5zY29wZS50ZW1wTGlzdCA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDEwMDsgKytpKSB7XG4gICAgdGhpcy5zY29wZS50ZW1wTGlzdC5wdXNoKFwiVGVtcCBMaXN0IEl0ZW0gXCIgKyBpKTtcbiAgfVxufV07XG5cbn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiB3YXJmcmFtZURpcmVjdGl2ZXMoYW5ndWxhcikge1xuICB2YXIgd2FyZnJhbWVEaXJlY3RpdmVzID0gYW5ndWxhci5tb2R1bGUoXCJ3YXJmcmFtZURpcmVjdGl2ZXNcIiwgW10pO1xuXG4gIHZhciBkaXJlY3RpdmVzID0gcmVxdWlyZShcIi4vZGlyZWN0aXZlc1wiKTtcbiAgZm9yICh2YXIgbmFtZSBpbiBkaXJlY3RpdmVzKSB7XG4gICAgd2FyZnJhbWVEaXJlY3RpdmVzLmRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmVzW25hbWVdKTtcbiAgfXZhciBkaXJlY3RpdmVDb250cm9sbGVycyA9IHJlcXVpcmUoXCIuL2NvbnRyb2xsZXJzXCIpO1xuICBmb3IgKHZhciBuYW1lIGluIGRpcmVjdGl2ZUNvbnRyb2xsZXJzKSB7XG4gICAgd2FyZnJhbWVEaXJlY3RpdmVzLmNvbnRyb2xsZXIobmFtZSwgZGlyZWN0aXZlQ29udHJvbGxlcnNbbmFtZV0pO1xuICB9XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cbm1vZHVsZS5leHBvcnRzID0gXCJ3YXJmcmFtZURpcmVjdGl2ZXNcIjtcblxufSx7XCIuL2NvbnRyb2xsZXJzXCI6MixcIi4vZGlyZWN0aXZlc1wiOjR9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFtcIiRzY29wZVwiLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gIC8vIENvbnRyb2xsZXIgc3R1YiwgaW4gY2FzZSBuZWVkZWQgaW4gdGhlIGZ1dHVyZVxuICAkc2NvcGUuY3RybCA9IHRoaXM7XG4gIHRoaXMuc2NvcGUgPSAkc2NvcGU7XG59XTtcblxufSx7fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBbXCIkc2NvcGVcIiwgXCIkc3RhdGVcIiwgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICRzY29wZS5jdHJsID0gdGhpcztcbiAgdGhpcy5zY29wZSA9ICRzY29wZTtcblxuICB2YXIgZGVidWcgPSBmYWxzZTtcbiAgdmFyIG5leHRMZXZlbCA9IHt9O1xuXG4gIHRoaXMudG9OZXh0U3RhdGUgPSBmdW5jdGlvbiB0b05leHRTdGF0ZShzZWxlY3RlZE9wdGlvbikge1xuICAgIC8vIEluaGVyaXQgYWxsIHN0YXRlUGFyYW1zIGJ1dCB0aGUgJ2xldmVsJyBzdGF0ZVBhcmFtXG4gICAgdmFyIG5leHRQYXJhbXMgPSAkc3RhdGUucGFyYW1zO1xuICAgIG5leHRQYXJhbXNbbmV4dExldmVsLnZhbHVlLnRvTG93ZXJDYXNlKCldID0gc2VsZWN0ZWRPcHRpb247XG4gICAgZGVsZXRlIG5leHRQYXJhbXMubGV2ZWw7XG5cbiAgICAkc3RhdGUuZ28oXCJyb290Lm1vZHMuXCIgKyBuZXh0TGV2ZWwudmFsdWUudG9Mb3dlckNhc2UoKSwgbmV4dFBhcmFtcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVsb2FkRGlyZWN0aXZlKCkge1xuICAgIHZhciBzdGF0ZVBhcmFtcyA9ICRzdGF0ZS5wYXJhbXM7XG5cbiAgICBzd2l0Y2ggKHN0YXRlUGFyYW1zLmxldmVsKSB7XG4gICAgICBjYXNlIFwiTW9kZVwiOlxuICAgICAgICBuZXh0TGV2ZWwudmFsdWUgPSBcIlR5cGVcIjtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJUeXBlXCI6XG4gICAgICAgIG5leHRMZXZlbC52YWx1ZSA9IFwiQ29tcGFuaW9uXCI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiQ29tcGFuaW9uXCI6XG4gICAgICAgIG5leHRMZXZlbC52YWx1ZSA9IFwicGxhY2Vob2xkZXJzdGF0ZVwiO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbmV4dExldmVsLnZhbHVlID0gXCJNb2RlXCI7XG4gICAgfVxuXG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImluc2lkZSByZWxvYWREaXJlY3RpdmVcIik7XG4gICAgICBjb25zb2xlLmxvZyhcImN1cnJlbnQgc3RhdGU6IFwiICsgJHN0YXRlLmN1cnJlbnQubmFtZSk7XG4gICAgICBjb25zb2xlLmxvZygkc2NvcGUpO1xuICAgIH1cblxuICAgIGlmIChkZWJ1Zykge1xuICAgICAgY29uc29sZS5sb2coXCJzdGF0ZVBhcmFtczpcIik7XG4gICAgICBjb25zb2xlLmxvZyhzdGF0ZVBhcmFtcyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLm9wdGlvbnMgPSAkc2NvcGUuY2hpbGRyZW47XG5cbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwibmV4dExldmVsOlwiKTtcbiAgICAgIGNvbnNvbGUubG9nKG5leHRMZXZlbCk7XG4gICAgICBjb25zb2xlLmxvZyhcInN0YXRlOlwiKTtcbiAgICAgIGNvbnNvbGUubG9nKCRzdGF0ZSk7XG4gICAgICBjb25zb2xlLmxvZyhcInNjb3BlOlwiKTtcbiAgICAgIGNvbnNvbGUubG9nKCRzY29wZSk7XG4gICAgICBjb25zb2xlLmxvZyhcIlxcblxcblxcblwiKTtcbiAgICB9XG4gIH1cblxuICByZWxvYWREaXJlY3RpdmUoKTtcbn1dO1xuXG59LHt9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFtcIiRzY29wZVwiLCBcIiRzdGF0ZVBhcmFtc1wiLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3RybCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZSA9ICRzY29wZTtcblxuICAgICAgICAgICAgICAgICAgIHZhciBkZWJ1ZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZS50ZW1wTGlzdEl0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZS50ZW1wTGlzdEl0ZW1zLnB1c2goXCJ0ZW1wTGlzdEl0ZW1cIiArIChpICsgMSkpO1xuICAgICAgICAgICAgICAgICAgIH1cbn1dO1xuXG59LHt9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuLypcbiAqIE5vdGU6XG4gKiAkc2NvcGUubmV3SXRlbSA9IHtcbiAqICAgdXNlcjogbG9nZ2VkIGluIHVzZXIgaWRcbiAqIH1cbiAqIFxuICogJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uIHBhc3NlZCBpbiBmcm9tIG91dGVyIHNjb3BlIHRvIGNhbmNlbC9yZXR1cm5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFtcIiRzY29wZVwiLCBcIiRodHRwXCIsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwKSB7XG4gIHZhciBkZWJ1ZyA9IGZhbHNlO1xuXG4gICRzY29wZS5jdHJsID0gdGhpcztcbiAgdGhpcy5zY29wZSA9ICRzY29wZTtcblxuICB0aGlzLnNjb3BlLnRyYW5zYWN0aW9ucyA9IFtcIkRlYWxcIiwgXCJBdWN0aW9uXCJdO1xuXG4gIHRoaXMuc2NvcGUuY2F0ZWdvcmllcyA9IFtcIk1vZHNcIiwgXCJTb3J0aWUgV2VhcG9uc1wiLCBcIlZvaWQgUGFydHNcIiwgXCJLZXlzXCIsIFwiQXJjYW5lc1wiXTtcblxuICB0aGlzLnNjb3BlLmRhdGVQaWNrZXIgPSB7XG4gICAgZm9ybWF0OiBcInl5eXktTU0tZGRcIixcbiAgICBvcHRpb25zOiB7XG4gICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgc3RhcnRpbmdEYXk6IDFcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5zdWJtaXRQb3N0ID0gZnVuY3Rpb24gc3VibWl0UG9zdCgpIHtcbiAgICB2YXIgY2F0ZWdvcnkgPSB0aGlzLnNjb3BlLm5ld0l0ZW0uY2F0ZWdvcnlbXCJfaWRcIl07XG4gICAgdGhpcy5zY29wZS5uZXdJdGVtLmNhdGVnb3J5Lm5hbWUgPSBjYXRlZ29yeTtcbiAgICB0aGlzLnNjb3BlLm5ld0l0ZW0uY2F0ZWdvcnkucGFyZW50ID0gbnVsbDtcbiAgICB0aGlzLnNjb3BlLm5ld0l0ZW0uY2F0ZWdvcnkuYW5jZXN0b3JzID0gbnVsbDtcblxuICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2codGhpcy5zY29wZSk7XG5cbiAgICAkaHR0cC5wb3N0KFwiL2FwaS9pdGVtL25ld1wiLCB0aGlzLnNjb3BlLm5ld0l0ZW0sIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH1cbiAgICB9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXMpIHtcbiAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm5ld1Bvc3RDb250cm9sbGVyLCBzdWJtaXRQb3N0IHN1Y2Nlc3MhXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfVxuICAgICAgdGhpcy5jYW5jZWxQb3N0KCk7XG4gICAgfS5iaW5kKHRoaXMpLCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycikge1xuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibmV3UG9zdENvbnRyb2xsZXIsIHN1Ym1pdFBvc3QgZXJyb3IhXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuY2FuY2VsUG9zdCA9IGZ1bmN0aW9uIGNhbmNlbFBvc3QoKSB7XG4gICAgdGhpcy5zY29wZS5jYW5jZWwoKTtcbiAgfTtcblxuICBpZiAoIXRoaXMuc2NvcGUubmV3SXRlbS5leHBpcnkpIHRoaXMuc2NvcGUubmV3SXRlbS5leHBpcnkgPSBuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyAzKTtcblxuICBpZiAoIXRoaXMuc2NvcGUubmV3SXRlbS50cmFuc2FjdGlvbikgdGhpcy5zY29wZS5uZXdJdGVtLnRyYW5zYWN0aW9uID0gdGhpcy5zY29wZS50cmFuc2FjdGlvbnNbMF07XG5cbiAgaWYgKCF0aGlzLnNjb3BlLm5ld0l0ZW0uY2F0ZWdvcnkpIHtcbiAgICB0aGlzLnNjb3BlLm5ld0l0ZW0uY2F0ZWdvcnkgPSB7XG4gICAgICBfaWQ6IHRoaXMuc2NvcGUuY2F0ZWdvcmllc1swXVxuICAgIH07XG4gIH1cbn1dO1xuXG59LHt9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBbXCIkc2NvcGVcIiwgZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICAgICAgICAgICAgICAgICRzY29wZS5jdHJsID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICB0aGlzLnNjb3BlID0gJHNjb3BlO1xufV07XG5cbn0se31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gd2FyZnJhbWVTZXJ2aWNlcyhhbmd1bGFyKSB7XG4gIHZhciB3YXJmcmFtZVNlcnZpY2VzID0gYW5ndWxhci5tb2R1bGUoXCJ3YXJmcmFtZVNlcnZpY2VzXCIsIFtdKTtcblxuICB2YXIgc2VydmljZXMgPSByZXF1aXJlKFwiLi9zZXJ2aWNlc1wiKTtcbiAgZm9yICh2YXIgbmFtZSBpbiBzZXJ2aWNlcykge1xuICAgIHdhcmZyYW1lU2VydmljZXMuc2VydmljZShuYW1lLCBzZXJ2aWNlc1tuYW1lXSk7XG4gIH1cbn0pKHdpbmRvdy5hbmd1bGFyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBcIndhcmZyYW1lU2VydmljZXNcIjtcblxufSx7XCIuL3NlcnZpY2VzXCI6MTR9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBbXCIkaHR0cFwiLCBcIiRxXCIsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgdmFyIGNhY2hlID0ge307XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRDYXRlZ29yeTogZnVuY3Rpb24gZ2V0Q2F0ZWdvcnkocGF0aCkge1xuICAgICAgaWYgKGNhY2hlW3BhdGhdICYmIGNhY2hlW3BhdGhdLmNhdGVnb3J5ICE9PSB1bmRlZmluZWQpIHJldHVybiBjYWNoZVtwYXRoXS5jYXRlZ29yeTtcblxuICAgICAgcmV0dXJuICRodHRwLmdldChcIi9hcGkvY2F0ZWdvcnlcIiArIHBhdGgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhyZXMpIHtcbiAgICAgICAgLy8gQVBJIHJldHVybnMgSXRlbUNhdGVnb3J5IE9iamVjdFxuICAgICAgICBpZiAoIWNhY2hlW3BhdGhdKSBjYWNoZVtwYXRoXSA9IHt9O1xuXG4gICAgICAgIGNhY2hlW3BhdGhdLmNhdGVnb3J5ID0gcmVzLmRhdGEuY2F0ZWdvcnk7XG4gICAgICAgIHJldHVybiByZXMuZGF0YS5jYXRlZ29yeTtcbiAgICAgIH0sIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAvLyBQcm9taXNlIHJlamVjdGVkLCByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRDaGlsZHJlbjogZnVuY3Rpb24gZ2V0Q2hpbGRyZW4ocGF0aCkge1xuICAgICAgaWYgKGNhY2hlW3BhdGhdICYmIGNhY2hlW3BhdGhdLmNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHJldHVybiBjYWNoZVtwYXRoXS5jaGlsZHJlbjtcblxuICAgICAgcmV0dXJuICRodHRwLmdldChcIi9hcGkvY2F0ZWdvcnkvY2hpbGRyZW5cIiArIHBhdGgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhyZXMpIHtcbiAgICAgICAgaWYgKCFjYWNoZVtwYXRoXSkgY2FjaGVbcGF0aF0gPSB7fTtcblxuICAgICAgICBpZiAoIXJlcy5kYXRhLmNoaWxkcmVuIHx8IHJlcy5kYXRhLmNoaWxkcmVuLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgY2FjaGVbcGF0aF0uY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQVBJIHJldHVybnMgYXJyYXkgb2YgY2hpbGRyZW4gY2F0ZWdvcnkgbmFtZXNcbiAgICAgICAgY2FjaGVbcGF0aF0uY2hpbGRyZW4gPSByZXMuZGF0YS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5uYW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNhY2hlW3BhdGhdLmNoaWxkcmVuO1xuICAgICAgfSwgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgIC8vIFByb21pc2UgcmVqZWN0ZWQsIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV07XG5cbn0se31dLDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLnVzZXJTZXNzaW9uU2VydmljZSA9IHJlcXVpcmUoXCIuL3VzZXJTZXNzaW9uU2VydmljZVwiKTtcblxuZXhwb3J0cy5pdGVtQ2F0ZWdvcnlTZXJ2aWNlID0gcmVxdWlyZShcIi4vaXRlbUNhdGVnb3J5U2VydmljZVwiKTtcblxufSx7XCIuL2l0ZW1DYXRlZ29yeVNlcnZpY2VcIjoxMyxcIi4vdXNlclNlc3Npb25TZXJ2aWNlXCI6MTV9XSwxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBbXCIkaHR0cFwiLCBcIiRxXCIsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRVc2VyU2Vzc2lvbjogZnVuY3Rpb24gZ2V0VXNlclNlc3Npb24oKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KFwiL2FwaS9tZVwiKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MocmVzKSB7XG4gICAgICAgIC8vIEFQSSByZXR1cm5zIHZhbGlkIHVzZXIgZGF0YSFcbiAgICAgICAgcmV0dXJuIHJlcy5kYXRhLnVzZXI7XG4gICAgICB9LCBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgICAgLy8gU3RpbGwgcmVzb2x2ZSBwcm9taXNlLCB3aXRoIHVzZXIgYXMgbnVsbFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG59LHt9XX0se30sWzFdKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
